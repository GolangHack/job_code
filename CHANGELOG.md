# Release 2.0 (30.01.2021)

### Список изменений

* Добавлена возможность выхода со страницы page_error_bill_acceptor, нажатием на логотип
  RobotCarWash в шапке страницы 3 раза.
* При попытке создать Z-отчет, при закрытой смене будет отображаться модальное окно с уведомлением
  пользователя о том, что смена закрыта.
* Добавлена страница оператора, при помощи которой можно следить за текущим состоянием датчиков
  положения автомобиля, наличием автомобиля внутри бокса, а также сброс автомобиля внутри. Также на
  странице оператора можно открывать / закрывать ворота.
* Добавлена поддержка боковых ворот. На объекте в г. Гурьевск есть боковые ворота, которые
  открываются, если выбрана программа "Эконом", соответственно автомобиль не заезжает в сухую зону,
  а сразу выезжает через боковые ворота. Добавлены миграторы `8_addProgramHasOptions.py`, который
  добавляет переменные типа `cfg_Program_*_HasOptions`, отвечающие за то, имеет ли программа доп.
  опции или нет, а также `8_addAttributeToQueueOnRobots.sql` для индикации того, нужно ли открывать
  боковые ворота или нет.
* На странице баланса клиентской карты теперь отображается номер карты, а также имя владельца. При
  печати чека с балансом клиентской карты, на чеке также отображается имя владельца.
* Добавлена возможность добавления рекламного объявления на страницы с QR кодом и номером очереди.
* Добавлена возможность управления НДС и СНО из облака с помощью переменных `cfg_atol_nds_type`
  и `cfg_atol_type_sno`.
* Добавлена поддержка 3 и больше роботов.
* Добавлена поддержка различных Bill Acceptor и Bill Dispenser (LCDM1, ICT BC, NV11+).
* Добавлена возможность отключать печать чека с выбранными дополнительными сервисами.
* Исправлены мелкие баги и недочеты в работе программы.

### Новые миграторы

Для переключения на данную ветку, необходимо проверить внесены ли изменения, добавляемые следующими
миграторами:

* `data_storage/migrations/7_migrationClientOrder_for_qrcode.sql`
* `migrator_db_tereshko/8_addProgramHasOptions.py`
* `data_storage/migrations/8_addAttributeToQueueOnRobots.sql`
* `data_storage/migrations/9_addCardAndClientName.sql`

### Новые переменные

При переключении на данную ветку, необходимо проверить наличие следующих переменных в БД:

#### Переменные для Bill Acceptor и Bill Dispenser

* `cfg_bill_acceptor_port`
* `cfg_bill_acceptor_typename`
* `cfg_bill_acceptor_disabled`
* `cfg_bill_dispenser_port`
* `cfg_bill_dispenser_typename`
* `cfg_bill_dispenser_emulate`

#### Переменные для добавления рекламного текста

* `cfg_advertising_text`
* `cfg_show_advertising_text`

#### Переменные для добавления боковых ворот

* `cfg_side_gate_closed_delay`
* `cfg_side_gate_disabled`
* `cfg_side_gate_emulate`
* `cfg_side_gate_open_output`
* `cfg_side_gate_sensor_input`

#### Переменные для работы с АТОЛ

* `cfg_atol_print_service_check_enabled`
* `cfg_atol_nds_type`
* `cfg_atol_type_sno`